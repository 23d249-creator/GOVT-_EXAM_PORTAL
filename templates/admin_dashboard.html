<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="admin-body">

<div class="dashboard">
    <h1>ğŸ‘¨â€ğŸ’» Admin Dashboard</h1>

    <div class="stats">
        <p>Total Notes: <b>{{ total_notes }}</b></p>
        <p>Viewed Notes: <b>{{ viewed_notes }}</b></p>
        <p>Total Tests: <b>{{ total_tests }}</b></p>
        <p>Tests Attended: <b>{{ attended_tests }}</b></p>
    </div>

    <h2>Upload New Note</h2>
    <form action="{{ url_for('upload_note') }}" method="post" enctype="multipart/form-data">
        <input type="text" name="title" placeholder="Note Title" required>
        <input type="file" name="file" required>
        <button type="submit" class="btn">Upload</button>
    </form>

    <h2>Add Test Link</h2>
    <form action="{{ url_for('add_test') }}" method="post">
        <input type="text" name="title" placeholder="Test Title" required>
        <input type="url" name="link" placeholder="Test Link" required>
        <button type="submit" class="btn">Add Test</button>
    </form>

    <hr>

    <!-- âœ… Manage Notes Section -->
    <h2>ğŸ“š Manage Notes</h2>
    <table class="data-table">
        <tr>
            <th>Title</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for note in notes %}
        <tr>
            <td>{{ note.title }}</td>
            <td>{% if note.viewed %}âœ… Viewed{% else %}âŒ Not Viewed{% endif %}</td>
            <td>
                <a href="{{ url_for('edit_note', note_id=note.doc_id) }}" class="btn">Edit</a>
                <a href="{{ url_for('delete_note', note_id=note.doc_id) }}" class="btn delete-btn">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <!-- âœ… Manage Tests Section -->
    <h2>ğŸ§¾ Manage Tests</h2>
    <table class="data-table">
        <tr>
            <th>Title</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
        {% for test in tests %}
        <tr>
            <td>{{ test.title }}</td>
            <td>{% if test.viewed %}âœ… Attempted{% else %}âŒ Not Attempted{% endif %}</td>
            <td>
                <a href="{{ url_for('edit_test', test_id=test.doc_id) }}" class="btn">Edit</a>
                <a href="{{ url_for('delete_test', test_id=test.doc_id) }}" class="btn delete-btn">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <a href="{{ url_for('logout') }}" class="btn logout-btn">Logout</a>
</div>

</body>
</html>
